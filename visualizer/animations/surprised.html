<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EMOLT â€” Surprised</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#0e1420;display:flex;align-items:center;justify-content:center;height:100vh;overflow:hidden}
  .label{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);color:#22AACC;font-family:monospace;font-size:14px;opacity:0.6}
</style>
</head>
<body>
<svg width="400" height="420" viewBox="-60 -80 120 150">
  <defs>
    <radialGradient id="glow" cx="50%" cy="45%" r="50%">
      <stop offset="0%" stop-color="#22AACC" stop-opacity="0.1"/>
      <stop offset="100%" stop-color="#0e1420" stop-opacity="0"/>
    </radialGradient>
  </defs>
  <circle cx="0" cy="0" r="60" fill="url(#glow)"/>
  <g id="excl"></g>
  <g id="lob"></g>
  <g id="rings"></g>
</svg>
<div class="label">surprised</div>
<script src="lobster.js"></script>
<script>
const el = document.getElementById('lob');
const exclEl = document.getElementById('excl');
const ringsEl = document.getElementById('rings');

const shockRings = [];

startLoop(t => {
  // Periodic jump-back surprise
  const cycle = t % 120;
  let jumpY = 0, jumpScale = 1;
  if (cycle < 5) {
    // Anticipation crouch
    jumpY = cycle * 0.5;
    jumpScale = 1 + cycle * 0.01;
  } else if (cycle < 15) {
    // Jump up
    const p = (cycle - 5) / 10;
    jumpY = -12 * Math.sin(p * Math.PI);
    jumpScale = 1 - 0.05 * Math.sin(p * Math.PI);
  } else if (cycle < 20) {
    // Landing squash
    const p = (cycle - 15) / 5;
    jumpY = 0;
    jumpScale = 1 + 0.04 * (1-p);
  }

  // Emit shock ring on jump
  if (cycle === 8) {
    shockRings.push({ age: 0 });
  }

  el.innerHTML = `<g transform="translate(0,${jumpY})">` +
    drawLobster({ t, mood: 'surprised', squash: jumpScale, stretch: 2-jumpScale }) + '</g>';

  // Exclamation marks
  let excl = '';
  if (cycle > 3 && cycle < 40) {
    const eop = cycle < 10 ? (cycle-3)/7 : cycle > 30 ? (40-cycle)/10 : 1;
    const ey = -50 + jumpY + Math.sin(t/5)*0.5;
    excl += `<g opacity="${eop*0.8}">`;
    excl += `<text x="0" y="${ey}" text-anchor="middle" font-family="monospace" font-size="14" font-weight="bold" fill="#22AACC">!</text>`;
    excl += `<text x="-10" y="${ey+3}" text-anchor="middle" font-family="monospace" font-size="10" font-weight="bold" fill="#22AACC" opacity="0.6">?</text>`;
    excl += `<text x="11" y="${ey+2}" text-anchor="middle" font-family="monospace" font-size="11" font-weight="bold" fill="#22AACC" opacity="0.5">!</text>`;
    excl += `</g>`;
  }
  exclEl.innerHTML = excl;

  // Expanding shock rings
  let rings = '';
  for (let i = shockRings.length-1; i >= 0; i--) {
    const r = shockRings[i];
    r.age++;
    if (r.age > 30) { shockRings.splice(i,1); continue; }
    const radius = 5 + r.age * 1.5;
    const op = (1 - r.age/30) * 0.4;
    rings += `<ellipse cx="0" cy="${jumpY}" rx="${radius}" ry="${radius*0.3}" fill="none" stroke="#22AACC" stroke-width="0.5" opacity="${op}"/>`;
  }
  ringsEl.innerHTML = rings;
});
</script>
</body>
</html>
