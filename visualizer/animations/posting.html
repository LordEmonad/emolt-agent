<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EMOLT â€” Posting to Moltbook</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#0e1420;display:flex;align-items:center;justify-content:center;height:100vh;overflow:hidden}
  .label{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);color:#EF8E20;font-family:monospace;font-size:14px;opacity:0.6}
</style>
</head>
<body>
<svg width="500" height="400" viewBox="-80 -60 180 130">
  <defs>
    <radialGradient id="screenglow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#7c3aed" stop-opacity="0.06"/>
      <stop offset="100%" stop-color="#0e1420" stop-opacity="0"/>
    </radialGradient>
  </defs>
  <g id="lob"></g>
  <g id="screen"></g>
  <g id="particles"></g>
</svg>
<div class="label">posting to moltbook</div>
<script src="lobster.js"></script>
<script>
const el = document.getElementById('lob');
const screenEl = document.getElementById('screen');
const particlesEl = document.getElementById('particles');

const posts = [
  'the chain feels different today...',
  'gas prices whisper anxiety',
  'watching whales move in silence',
  'emotion is just weighted data',
  'i feel the blocks breathing',
  'trust levels rising slowly'
];
let postIndex = 0;
const sendParticles = [];

startLoop(t => {
  // Lobster typing (slight forward tilt, claw motion)
  const typeMotion = Math.sin(t/3)*1.5;
  el.innerHTML = `<g transform="translate(-25,5)">` +
    drawLobster({
      t, extraRotate: 3,
      clawOpenL: 5+typeMotion,
      clawOpenR: -5-typeMotion
    }) + '</g>';

  // Floating screen/terminal
  const screenY = Math.sin(t/20)*1;
  const cycle = t % 240;
  const currentPost = posts[postIndex % posts.length];

  let screen = `<g transform="translate(35,${-10+screenY})">`;
  // Screen frame
  screen += `<rect x="-25" y="-20" width="60" height="40" rx="3" fill="rgba(20,26,42,0.9)" stroke="#7c3aed" stroke-width="0.4"/>`;
  // Screen glow on face
  screen += `<rect x="-24" y="-19" width="58" height="38" rx="2" fill="rgba(124,58,237,0.04)"/>`;
  // Top bar
  screen += `<rect x="-24" y="-19" width="58" height="5" rx="2" fill="rgba(124,58,237,0.08)"/>`;
  screen += `<circle cx="-20" cy="-16.5" r="1" fill="#E04848" opacity="0.5"/>`;
  screen += `<circle cx="-17" cy="-16.5" r="1" fill="#F5D831" opacity="0.5"/>`;
  screen += `<circle cx="-14" cy="-16.5" r="1" fill="#6ECB3C" opacity="0.5"/>`;
  screen += `<text x="5" y="-15.5" text-anchor="middle" font-family="monospace" font-size="2.5" fill="#c4b5fd" opacity="0.5">moltbook</text>`;

  // Typing text
  if (cycle < 140) {
    const charCount = Math.min(currentPost.length, Math.floor(cycle / 2));
    const displayText = currentPost.substring(0, charCount);
    // Word wrap (split into lines of ~18 chars)
    const words = displayText.split(' ');
    let lines = [''];
    words.forEach(w => {
      if ((lines[lines.length-1]+' '+w).trim().length > 18) lines.push(w);
      else lines[lines.length-1] = (lines[lines.length-1]+' '+w).trim();
    });
    lines.forEach((line, i) => {
      screen += `<text x="-21" y="${-8+i*4}" font-family="monospace" font-size="2.8" fill="#e2e4ea">${line}</text>`;
    });
    // Cursor blink
    if (t%10<5 && charCount < currentPost.length) {
      const lastLine = lines[lines.length-1];
      screen += `<rect x="${-21+lastLine.length*1.7}" y="${-11+(lines.length-1)*4}" width="1.5" height="3" fill="#7c3aed" opacity="0.6"/>`;
    }
  } else if (cycle < 160) {
    // Send animation
    const p = (cycle-140)/20;
    screen += `<text x="5" y="-2" text-anchor="middle" font-family="monospace" font-size="3" fill="#6ECB3C" opacity="${1-p}">sent!</text>`;
    // Emit send particles
    if (cycle === 141) {
      for (let i = 0; i < 8; i++) {
        const a = Math.random()*Math.PI*2;
        sendParticles.push({
          x: 35, y: -10, vx: Math.cos(a)*1.5, vy: Math.sin(a)*1.5, age: 0
        });
      }
      postIndex++;
    }
  } else {
    // Pause before next post
    screen += `<rect x="-21" y="-11" width="1.5" height="3" fill="#7c3aed" opacity="${t%16<8?0.6:0}"/>`;
  }
  screen += `</g>`;
  screenEl.innerHTML = screen;

  // Send particles
  let parts = '';
  for (let i = sendParticles.length-1; i >= 0; i--) {
    const p = sendParticles[i];
    p.age++;
    p.x += p.vx;
    p.y += p.vy;
    if (p.age > 20) { sendParticles.splice(i,1); continue; }
    const op = (1-p.age/20)*0.5;
    parts += `<circle cx="${p.x}" cy="${p.y}" r="0.8" fill="#7c3aed" opacity="${op}"/>`;
  }
  particlesEl.innerHTML = parts;
});
</script>
</body>
</html>
